<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="5" failures="2" skipped="0" tests="26" time="96.333" timestamp="2026-01-03T11:27:03.382085+00:00" hostname="agent-env-260d2524-8e89-447c-9aba-6daf092db7a8"><testcase classname="tests.test_eric_search.TestAuthSetup" name="test_admin_login" time="0.317" /><testcase classname="tests.test_eric_search.TestAuthSetup" name="test_test_user_login" time="0.279" /><testcase classname="tests.test_eric_search.TestERICSearchAPI" name="test_search_all_with_russian_keyword" time="0.321" /><testcase classname="tests.test_eric_search.TestERICSearchAPI" name="test_search_all_with_english_keyword" time="3.528" /><testcase classname="tests.test_eric_search.TestERICSearchAPI" name="test_search_services_only" time="2.703"><failure message="AssertionError: Expected service type, got organization&#10;assert 'organization' == 'service'&#10;  &#10;  - service&#10;  + organization">tests/test_eric_search.py:127: in test_search_services_only
    assert result.get("type") == "service", f"Expected service type, got {result.get('type')}"
E   AssertionError: Expected service type, got organization
E   assert 'organization' == 'service'
E     
E     - service
E     + organization</failure></testcase><testcase classname="tests.test_eric_search.TestERICSearchAPI" name="test_search_products_only" time="0.055" /><testcase classname="tests.test_eric_search.TestERICSearchAPI" name="test_search_organizations_only" time="2.511" /><testcase classname="tests.test_eric_search.TestERICSearchAPI" name="test_search_people_only" time="3.179" /><testcase classname="tests.test_eric_search.TestERICSearchAPI" name="test_search_with_location_filter" time="3.749" /><testcase classname="tests.test_eric_search.TestERICSearchAPI" name="test_search_with_limit" time="3.593"><failure message="AssertionError: Expected max 3 results, got 4&#10;assert 4 &lt;= 3&#10; +  where 4 = len([{'description': 'Тестовая школа для демонстрации функций', 'id': '7b2aba34-723f-4f5a-bd93-c451d94452cd', 'industry': 'Education', 'metadata': {'city': 'Москва', 'founded_year': 2020, 'logo_url': 'https://ui-avatars.com/api/?name=ТШ&amp;background=C2410C&amp;color=fff&amp;size=128', 'member_count': 1, ...}, ...}, {'description': 'Описание тестовой услуги для демонстрации', 'id': 'c5aa409c-d881-4c2e-b388-515cfb7b5b94', 'metadata': {'category': 'beauty', 'city': 'Москва', 'currency': 'RUB', 'price_from': 1000.0, ...}, 'name': 'Тестовая услуга', ...}, {'description': 'Описание тестовой услуги для демонстрации', 'id': '868564da-e9ab-4c63-8434-949e5a1f9188', 'metadata': {'category': 'beauty', 'city': 'Москва', 'currency': 'RUB', 'price_from': 1000.0, ...}, 'name': 'Тестовая услуга', ...}, {'description': None, 'id': 'ea40407c-e6df-46e5-95fd-4b05efd4497c', 'metadata': {'profile_picture': None}, 'name': 'Тест Пользователь', ...}])&#10; +    where [{'description': 'Тестовая школа для демонстрации функций', 'id': '7b2aba34-723f-4f5a-bd93-c451d94452cd', 'industry': 'Education', 'metadata': {'city': 'Москва', 'founded_year': 2020, 'logo_url': 'https://ui-avatars.com/api/?name=ТШ&amp;background=C2410C&amp;color=fff&amp;size=128', 'member_count': 1, ...}, ...}, {'description': 'Описание тестовой услуги для демонстрации', 'id': 'c5aa409c-d881-4c2e-b388-515cfb7b5b94', 'metadata': {'category': 'beauty', 'city': 'Москва', 'currency': 'RUB', 'price_from': 1000.0, ...}, 'name': 'Тестовая услуга', ...}, {'description': 'Описание тестовой услуги для демонстрации', 'id': '868564da-e9ab-4c63-8434-949e5a1f9188', 'metadata': {'category': 'beauty', 'city': 'Москва', 'currency': 'RUB', 'price_from': 1000.0, ...}, 'name': 'Тестовая услуга', ...}, {'description': None, 'id': 'ea40407c-e6df-46e5-95fd-4b05efd4497c', 'metadata': {'profile_picture': None}, 'name': 'Тест Пользователь', ...}] = &lt;built-in method get of dict object at 0xf8294eb64c40&gt;('results', [])&#10; +      where &lt;built-in method get of dict object at 0xf8294eb64c40&gt; = {'ai_summary': 'На основе результатов поиска по запросу &quot;тест&quot; в системе ZION.CITY найдены организации, услуги и люди. Для получения конкретной информации уточните, что именно вас интересует: школа, услуга или конкретный человек. Это поможет сузить поиск и дать точный ответ.', 'query': 'тест', 'results': [{'description': 'Тестовая школа для демонстрации функций', 'id': '7b2aba34-723f-4f5a-bd93-c451d94452cd', 'industry': 'Education', 'metadata': {'city': 'Москва', 'founded_year': 2020, 'logo_url': 'https://ui-avatars.com/api/?name=ТШ&amp;background=C2410C&amp;color=fff&amp;size=128', 'member_count': 1, ...}, ...}, {'description': 'Описание тестовой услуги для демонстрации', 'id': 'c5aa409c-d881-4c2e-b388-515cfb7b5b94', 'metadata': {'category': 'beauty', 'city': 'Москва', 'currency': 'RUB', 'price_from': 1000.0, ...}, 'name': 'Тестовая услуга', ...}, {'description': 'Описание тестовой услуги для демонстрации', 'id': '868564da-e9ab-4c63-8434-949e5a1f9188', 'metadata': {'category': 'beauty', 'city': 'Москва', 'currency': 'RUB', 'price_from': 1000.0, ...}, 'name': 'Тестовая услуга', ...}, {'description': None, 'id': 'ea40407c-e6df-46e5-95fd-4b05efd4497c', 'metadata': {'profile_picture': None}, 'name': 'Тест Пользователь', ...}], 'search_type': 'all', ...}.get">tests/test_eric_search.py:197: in test_search_with_limit
    assert len(data.get("results", [])) &lt;= 3, f"Expected max 3 results, got {len(data.get('results', []))}"
E   AssertionError: Expected max 3 results, got 4
E   assert 4 &lt;= 3
E    +  where 4 = len([{'description': 'Тестовая школа для демонстрации функций', 'id': '7b2aba34-723f-4f5a-bd93-c451d94452cd', 'industry': 'Education', 'metadata': {'city': 'Москва', 'founded_year': 2020, 'logo_url': 'https://ui-avatars.com/api/?name=ТШ&amp;background=C2410C&amp;color=fff&amp;size=128', 'member_count': 1, ...}, ...}, {'description': 'Описание тестовой услуги для демонстрации', 'id': 'c5aa409c-d881-4c2e-b388-515cfb7b5b94', 'metadata': {'category': 'beauty', 'city': 'Москва', 'currency': 'RUB', 'price_from': 1000.0, ...}, 'name': 'Тестовая услуга', ...}, {'description': 'Описание тестовой услуги для демонстрации', 'id': '868564da-e9ab-4c63-8434-949e5a1f9188', 'metadata': {'category': 'beauty', 'city': 'Москва', 'currency': 'RUB', 'price_from': 1000.0, ...}, 'name': 'Тестовая услуга', ...}, {'description': None, 'id': 'ea40407c-e6df-46e5-95fd-4b05efd4497c', 'metadata': {'profile_picture': None}, 'name': 'Тест Пользователь', ...}])
E    +    where [{'description': 'Тестовая школа для демонстрации функций', 'id': '7b2aba34-723f-4f5a-bd93-c451d94452cd', 'industry': 'Education', 'metadata': {'city': 'Москва', 'founded_year': 2020, 'logo_url': 'https://ui-avatars.com/api/?name=ТШ&amp;background=C2410C&amp;color=fff&amp;size=128', 'member_count': 1, ...}, ...}, {'description': 'Описание тестовой услуги для демонстрации', 'id': 'c5aa409c-d881-4c2e-b388-515cfb7b5b94', 'metadata': {'category': 'beauty', 'city': 'Москва', 'currency': 'RUB', 'price_from': 1000.0, ...}, 'name': 'Тестовая услуга', ...}, {'description': 'Описание тестовой услуги для демонстрации', 'id': '868564da-e9ab-4c63-8434-949e5a1f9188', 'metadata': {'category': 'beauty', 'city': 'Москва', 'currency': 'RUB', 'price_from': 1000.0, ...}, 'name': 'Тестовая услуга', ...}, {'description': None, 'id': 'ea40407c-e6df-46e5-95fd-4b05efd4497c', 'metadata': {'profile_picture': None}, 'name': 'Тест Пользователь', ...}] = &lt;built-in method get of dict object at 0xf8294eb64c40&gt;('results', [])
E    +      where &lt;built-in method get of dict object at 0xf8294eb64c40&gt; = {'ai_summary': 'На основе результатов поиска по запросу "тест" в системе ZION.CITY найдены организации, услуги и люди. Для получения конкретной информации уточните, что именно вас интересует: школа, услуга или конкретный человек. Это поможет сузить поиск и дать точный ответ.', 'query': 'тест', 'results': [{'description': 'Тестовая школа для демонстрации функций', 'id': '7b2aba34-723f-4f5a-bd93-c451d94452cd', 'industry': 'Education', 'metadata': {'city': 'Москва', 'founded_year': 2020, 'logo_url': 'https://ui-avatars.com/api/?name=ТШ&amp;background=C2410C&amp;color=fff&amp;size=128', 'member_count': 1, ...}, ...}, {'description': 'Описание тестовой услуги для демонстрации', 'id': 'c5aa409c-d881-4c2e-b388-515cfb7b5b94', 'metadata': {'category': 'beauty', 'city': 'Москва', 'currency': 'RUB', 'price_from': 1000.0, ...}, 'name': 'Тестовая услуга', ...}, {'description': 'Описание тестовой услуги для демонстрации', 'id': '868564da-e9ab-4c63-8434-949e5a1f9188', 'metadata': {'category': 'beauty', 'city': 'Москва', 'currency': 'RUB', 'price_from': 1000.0, ...}, 'name': 'Тестовая услуга', ...}, {'description': None, 'id': 'ea40407c-e6df-46e5-95fd-4b05efd4497c', 'metadata': {'profile_picture': None}, 'name': 'Тест Пользователь', ...}], 'search_type': 'all', ...}.get</failure></testcase><testcase classname="tests.test_eric_search.TestERICSearchAPI" name="test_search_empty_query" time="3.394" /><testcase classname="tests.test_eric_search.TestERICSearchAPI" name="test_search_unauthorized" time="0.042" /><testcase classname="tests.test_eric_search.TestERICChatWithSearch" name="test_chat_with_search_keyword_naidi" time="24.596" /><testcase classname="tests.test_eric_search.TestERICChatWithSearch" name="test_chat_with_search_keyword_poisk" time="11.171" /><testcase classname="tests.test_eric_search.TestERICChatWithSearch" name="test_chat_with_search_keyword_ischu" time="9.062" /><testcase classname="tests.test_eric_search.TestERICChatWithSearch" name="test_chat_without_search_keyword" time="5.392" /><testcase classname="tests.test_eric_search.TestERICChatWithSearch" name="test_chat_with_conversation_id" time="21.483" /><testcase classname="tests.test_eric_search.TestERICChatWithSearch" name="test_chat_unauthorized" time="0.060" /><testcase classname="tests.test_eric_search.TestBusinessERICSettings" name="test_get_eric_settings_default" time="0.322"><error message="failed on setup with &quot;AttributeError: 'str' object has no attribute 'get'&quot;">tests/test_eric_search.py:365: in test_organization_id
    org_id = org.get("id") or org.get("organization_id")
             ^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'</error></testcase><testcase classname="tests.test_eric_search.TestBusinessERICSettings" name="test_update_eric_settings" time="0.000"><error message="failed on setup with &quot;AttributeError: 'str' object has no attribute 'get'&quot;">tests/test_eric_search.py:365: in test_organization_id
    org_id = org.get("id") or org.get("organization_id")
             ^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'</error></testcase><testcase classname="tests.test_eric_search.TestBusinessERICSettings" name="test_get_eric_settings_after_update" time="0.000"><error message="failed on setup with &quot;AttributeError: 'str' object has no attribute 'get'&quot;">tests/test_eric_search.py:365: in test_organization_id
    org_id = org.get("id") or org.get("organization_id")
             ^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'</error></testcase><testcase classname="tests.test_eric_search.TestBusinessERICSettings" name="test_eric_settings_unauthorized" time="0.000"><error message="failed on setup with &quot;AttributeError: 'str' object has no attribute 'get'&quot;">tests/test_eric_search.py:365: in test_organization_id
    org_id = org.get("id") or org.get("organization_id")
             ^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'</error></testcase><testcase classname="tests.test_eric_search.TestBusinessERICSettings" name="test_eric_settings_non_admin" time="0.000"><error message="failed on setup with &quot;AttributeError: 'str' object has no attribute 'get'&quot;">tests/test_eric_search.py:365: in test_organization_id
    org_id = org.get("id") or org.get("organization_id")
             ^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'</error></testcase><testcase classname="tests.test_eric_search.TestSearchTermExpansion" name="test_krasota_maps_to_beauty" time="0.313" /><testcase classname="tests.test_eric_search.TestSearchTermExpansion" name="test_remont_maps_to_repair" time="0.044" /><testcase classname="tests.test_eric_search.TestSearchTermExpansion" name="test_mashina_maps_to_auto" time="0.041" /></testsuite></testsuites>